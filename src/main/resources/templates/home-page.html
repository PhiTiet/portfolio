<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout.html}"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Phi Tiet</title>
</head>

<body>
<div layout:fragment="content">

    <section th:replace="~{fragments/home-page/hero :: hero}"></section>

    <section id="recommendations" class="section section-alt" aria-labelledby="recommendations-heading">
        <div class="container">
            <div th:replace="~{fragments/home-page/recommendation :: recommendation}"></div>
        </div>
    </section>

    <section id="experience" class="section" aria-labelledby="experience-heading">
        <div class="container">
            <div th:replace="~{fragments/home-page/timeline :: timeline}"></div>
        </div>
    </section>

    <section id="skills" class="section section-alt" aria-labelledby="skills-heading">
        <div class="container">
            <div th:replace="~{fragments/home-page/skills :: skills}"></div>
        </div>
    </section>

    <section id="projects" class="section" aria-labelledby="projects-heading">
        <div class="container">
            <div th:replace="~{fragments/home-page/projects :: projects}"></div>
        </div>
    </section>

    <section id="certificates" class="section section-alt" aria-labelledby="certificates-heading">
        <div class="container">
            <div th:replace="~{fragments/home-page/certificates :: certificates}"></div>
        </div>
    </section>

    <section id="hobbies" class="section" aria-labelledby="hobbies-heading">
        <div class="container">
            <div th:replace="~{fragments/home-page/hobbies :: hobbies}"></div>
        </div>
    </section>

    <section id="contact" class="py-[var(--spacing-section)] bg-[linear-gradient(135deg,var(--color-accent-subtle)_0%,var(--color-bg-primary)_50%,var(--color-bg-secondary)_100%)]" aria-labelledby="contact-heading">
        <div class="container">
            <div class="max-w-3xl mx-auto text-center">
                <div class="flex flex-col items-center">
                    <span class="badge mb-4" th:text="#{contact.badge}">Let's Connect</span>
                    <h2 id="contact-heading" class="section-title" th:text="#{contact.title}">Get In Touch</h2>
                    <p class="text-lg mb-8 max-w-[32rem] text-[var(--color-text-secondary)]" th:text="#{contact.description}">
                        Have a project in mind or just want to chat about software engineering? 
                        I'm always open to discussing new opportunities and ideas.
                    </p>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full max-w-[32rem] mb-10">
                        <a href="https://www.linkedin.com/in/phi-tiet-804886220/" target="_blank" rel="noopener noreferrer" class="contact-card">
                            <div class="icon-circle">
                                <svg th:replace="~{fragments/general/icons :: linkedin(iconClass='w-6 h-6')}"></svg>
                            </div>
                            <div>
                                <p class="contact-label" th:text="#{contact.linkedin}">LinkedIn</p>
                                <p class="contact-value" th:text="#{contact.linkedin.name}">Phi Tiet</p>
                            </div>
                        </a>
                        
                        <a href="https://github.com/PhiTiet" target="_blank" rel="noopener noreferrer" class="contact-card">
                            <div class="icon-circle">
                                <svg th:replace="~{fragments/general/icons :: github(iconClass='w-6 h-6')}"></svg>
                            </div>
                            <div>
                                <p class="contact-label" th:text="#{contact.github}">GitHub</p>
                                <p class="contact-value" th:text="#{contact.github.name}">PhiTiet</p>
                            </div>
                        </a>
                    </div>

                    <div class="w-full max-w-[32rem]">
                        <h3 class="text-lg font-semibold text-[var(--color-text-primary)] mb-6" th:text="#{contact.form.title}">Send a Message</h3>
                        <form x-data="{
                                  name: '',
                                  email: '',
                                  message: '',
                                  submitted: false,
                                  submitting: false,
                                  error: null,
                                  async submit() {
                                      this.submitting = true;
                                      this.error = null;
                                      try {
                                          const response = await fetch('/api/contact', {
                                              method: 'POST',
                                              headers: {
                                                  'Content-Type': 'application/json'
                                              },
                                              body: JSON.stringify({
                                                  name: this.name,
                                                  email: this.email,
                                                  message: this.message
                                              })
                                          });
                                          if (response.ok) {
                                              this.submitted = true;
                                          } else {
                                              const data = await response.json();
                                              this.error = data.message || 'An error occurred. Please try again.';
                                          }
                                      } catch (e) {
                                          this.error = 'Network error. Please try again.';
                                      } finally {
                                          this.submitting = false;
                                      }
                                  }
                              }"
                              @submit.prevent="submit()"
                              class="space-y-4 text-left">

                            <template x-if="!submitted">
                                <div class="space-y-4">
                                    <div x-show="error" class="p-3 bg-red-500/10 border border-red-500/20 rounded-[var(--radius-md)] text-red-400 text-sm" x-text="error"></div>
                                    <div>
                                        <label for="contact-name" class="contact-form-label" th:text="#{contact.form.name}">Name</label>
                                        <input type="text" id="contact-name" name="name" x-model="name" required
                                               class="contact-form-input"
                                               th:attr="placeholder=#{contact.form.name.placeholder}">
                                    </div>
                                    <div>
                                        <label for="contact-email" class="contact-form-label" th:text="#{contact.form.email}">Email</label>
                                        <input type="email" id="contact-email" name="email" x-model="email" required autocomplete="email"
                                               class="contact-form-input"
                                               th:attr="placeholder=#{contact.form.email.placeholder}">
                                    </div>
                                    <div>
                                        <label for="contact-message" class="contact-form-label" th:text="#{contact.form.message}">Message</label>
                                        <textarea id="contact-message" name="message" x-model="message" required rows="4"
                                                  class="contact-form-input resize-none"
                                                  th:attr="placeholder=#{contact.form.message.placeholder}"></textarea>
                                    </div>
                                    <button type="submit"
                                            :disabled="submitting || !name || !email || !message"
                                            class="btn-accent w-full inline-flex items-center justify-center gap-2 py-2.5 px-5 font-medium text-sm rounded-[var(--radius-md)] disabled:opacity-50 disabled:cursor-not-allowed">
                                        <svg x-show="submitting" class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24">
                                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                        </svg>
                                        <span th:text="#{contact.form.send}">Send Message</span>
                                    </button>
                                </div>
                            </template>

                            <template x-if="submitted">
                                <div class="text-center py-8">
                                    <div class="icon-circle mx-auto mb-4">
                                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/>
                                        </svg>
                                    </div>
                                    <p class="text-lg font-semibold text-[var(--color-text-primary)] mb-2" th:text="#{contact.form.success.title}">Message Sent!</p>
                                    <p class="text-sm text-[var(--color-text-secondary)]" th:text="#{contact.form.success.message}">Thanks for reaching out. I'll get back to you soon.</p>
                                </div>
                            </template>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

</div>
</body>

</html>
