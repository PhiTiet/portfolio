<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head></head>

<body>
<div th:fragment="timeline" class="timeline-section">
    <div class="text-center mb-12">
        <span class="badge mb-4">Career Journey</span>
        <h2 class="text-3xl font-bold mb-4" style="color: var(--color-text-primary);">Work Experience</h2>
        <p class="text-lg max-w-2xl mx-auto" style="color: var(--color-text-secondary);">
            From hospitality roots to senior engineering roles â€” every step shaped who I am today.
        </p>
    </div>

    <div class="timeline">
        <div class="timeline-line"></div>
        
        <div th:each="event, iterStat : ${details.events}" 
             class="timeline-item"
             th:classappend="${iterStat.first} ? 'timeline-item-current timeline-item-left' : (${iterStat.even} ? 'timeline-item-right' : 'timeline-item-left')"
             th:attr="data-delay=${iterStat.index * 100}"
             x-data="{ show: false }"
             x-init="setTimeout(() => show = true, $el.dataset.delay)"
             x-bind:class="show ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-8'">
            
            <div class="timeline-marker">
                <div class="timeline-icon-wrapper" th:classappend="${iterStat.first} ? 'timeline-icon-current' : ''">
                    <i th:classappend="${event.icon.classes}" th:style="${event.icon.style}"></i>
                </div>
            </div>

            <div class="timeline-content">
                <div class="timeline-date-badge" th:classappend="${iterStat.first} ? 'timeline-date-current' : ''">
                    <span th:if="${iterStat.first}" class="timeline-current-indicator">Current</span>
                    <span th:text="${event.getWorkPeriod()}"></span>
                </div>
                
                <article class="timeline-card" th:classappend="${iterStat.first} ? 'timeline-card-current' : ''">
                    <div class="timeline-card-header">
                        <h3 class="timeline-job-title" th:text="${event.jobTitle}"></h3>
                        <p class="timeline-employer">
                            <span th:text="${event.employer}"></span>
                        </p>
                    </div>
                    
                    <div class="timeline-card-body" 
                         x-data="{ expanded: false }"
                         th:with="isLong=${#strings.length(event.description) > 150}">
                        <p class="timeline-description"
                           x-bind:class="!expanded && 'line-clamp-3'"
                           th:text="${event.description}"></p>
                        <button th:if="${isLong}"
                                class="timeline-expand-btn"
                                x-on:click="expanded = !expanded"
                                x-text="expanded ? 'Show less' : 'Read more'">
                        </button>
                    </div>
                </article>
            </div>
        </div>
    </div>
</div>
</body>

</html>
